## 스프링 삼각형

### 개요
스프링 부트를 공부하는 개발자로서 스프링의 기본 원리인 일명, 스프링 삼각형(IoC, PSA, AOP)에 대한 이해를 높이기 위한 글이다. 이번 글에서 특히 집중한 사항은 예시 코드없는 개념 설명이다. 개발관련 글을 읽을 때 예시 코드가 있다면 조금 더 현실적으로 개념을 이해할 수 있다. 하지만 종종 예시 코드가 글의 가독성을 방해한다고 생각한다. 이번 글을 통해 예시 코드없이 특정 개념에 대해 설명을 시도한다. 스스로에게도 도전이다.

- [참고 책 : 스프링 입문을 위한 자바 객체지향의 원리와 이해](http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&mallGb=KOR&barcode=9788998139940&orderClick=LEa&Kc=)

### 글의 표현 방식
글에서 사용한 표현 방식은 비유, 은유이다. 현실 세계에서 생명이 없는 사물이라도 마치 사람처럼 행동할 수 있는 객체로 표현된다. 즉, 자동차가 바퀴도 만들고, 밥도 먹고, 잠도 잘 수 있는 표현 방식이다. 이 방식을 사용하는 이유는 프로그래밍 세계에서 객체들은 현실의 객체와 다르기 때문이다. 현실에서는 스스로 움직일 수 없는 자동차도 프로그래밍 세계에서는 자신의 행동을 스스로 결정할 수 있다.

### 스프링 삼각형이란?
스프링 삼각형이란 무엇인가? 공식적인 명칭은 아니지만 이해를 돕기 위해 사용하는 단어이다. 스프링을 구성하는 핵심 개념 3가지를 말한다. IoC(Inversion of Control), PSA(Portable Service Abstract), AOP(Aspect of Perspective)이다.

### IoC(Inversion of Control)
IoC는 우리말로 바꾸면 제어의 역전이다. 조금 더 쉽게 표현하면 A가 가지고 있던 B에 대한 제어권이 뒤바뀐다는 의미이다. 여기서 말하는 A는 스프링에서 무엇이며 B은 무엇을 의미할까? A는 다른 객체를 반드시 사용해야 하는 객체를 의미한다. 예를 들면, 바퀴를 반드시 필요한 자동차라고 설명해보자. B은 다른 객체에 반드시 사용되는 객체를 말한다. 위 예시에서는 자동차의 바퀴이다.

보통 이런 관계에 의존성이 있다고 한다. 즉, 자동차는 바퀴에 의존성이 있다. 조금 더 쉽게 표현하면 바퀴는 자동차에게 반드시 필요한 존재이다. 그럼 다시 제어의 역전에 대해서 설명해보자. 위 예시에서 제어의 역전이 발생하기 전이라면 어떤 상황일까? 자동차가 바퀴에 대해서 제어권을 가지고 있는 상황이다. 즉, 자동차가 스스로 자신에게 필요한 바퀴를 생성한다고 할 수 있다.

만약, 위 예시에서 제어의 역전이 발생하면 어떤 상황인걸까? 자동차가 자신에게 필요한 바퀴를 스스로 만들지 않고 외부에서 전달받는 상황이다. 바퀴에 대한 자동차의 제어권이 스스로가 아니라 외부의 무언가로 변경된다. 이 때 제어의 역전이 일어난다.


#### 제어의 역전의 장점
그럼 제어의 역전의 장점은 무엇이길래 스프링은 이 개념을 채택했을까? 제어의 역전의 가장 큰 장점은 변경에 강하다는 점이다. 자동차는 자신에게 필요한 바퀴가 달라지면 새롭게 만들어야 하는 수고가 있다. 매번 새로 만들어야 하는 상황. 하지만 외부에서 바퀴를 전달받는 제어의 역전이 일어나면 자동차는 바퀴를 전달받은 바퀴로 쉽게 변경할 수 있다.

### PSA(Portable Service Abstract)
PSA는 사용자가 내부 구현을 몰라도 편리하게 사용할 수 있는 추상화된 서비스를 의미한다. 여기서 말하는 추상화는 무엇일까? 일반적으로 추상화는 어떤 사물이 가진 여러가지 특성 중 일부만 뽑아내 그 사물을 표현하는 방법을 의미한다. 회화에서 추상화도 어떤 대상의 필요한 부분만 캐치해서 그리는 기법을 의미한다.

스프링은 무엇을 추상화했으며 그 결과로 만들어진 편리한 서비스는 무엇일까? 스프링은 다양한 기술을 추상화했다. Spring web MVC, Spring transaction, Spring JDBC 등. Spring web MVC라는 기술을 통해서 사용자는 복잡한 web MVC의 원리는 몰라도 어노테이션으로 웹을 구성할 수 있다. 예를 들어, @Controller 어노테이션만 붙여도 그 클래스는 컨트롤러 역할을 할 수 있다.

아까 예시로 들었던 자동차와 바퀴로 설명을 이어가보자. 자동차와 바퀴의 브랜드는 다양하지만 바퀴를 교체하는 부품의 인터페이스는 같은 기종의 차량이라면 동일하다. 내가 A 브랜드의 타이어를 사용하다 B 브랜드의 타이어로 변경한다고 해서 내 자동차의 구조를 변경할 필요할 없다. 단지 바퀴만 교체하면 된다. 바퀴 교체하는 자동차의 구조가 모두 동일하기 때문이다.  

#### PSA의 장점
PSA의 장점은 사용자의 편의성을 높여준다. 한단계 추상화된 기술은 사용자에게 복잡한 기술 구현에서 벗어나게 해주며 기능 구현을 쉽게 할 수 있게 도와준다. 또한, 추상화된 기술을 사용하면 내부 구현체의 기술을 쉽게 변경할 수 있다.

### AOP(Aspect Oriented Programming)
AOP는 관점 중심 프로그래밍으로 애플리케이션 코드에서 중복으로 발생하는 코드를 처리하는 기술이다. 프로그램의 로직을 다양한 관점으로 나누고 그 관점 별로 모듈을 만드는 프로그래밍 방법이 AOP다. 만약 각 메서드의 실행 시간을 측정하고 싶다면, 메서드 전과 후의 시간을 측정한 뒤 끝난 시간에서 시작 시간을 빼는 로직이 모든 메서드에서 반복된다. 이 때 메서드의 전과 후에서 시간을 측정하는 코드를 횡단 관심사라고 한다. 이유는 프로그램 전체에서 공통적으로 발생하기 때문이다.

실생활 예시를 들어보면, 우리가 요리를 한다고 하자. 그럼 요리를 할 때마다 매번 반복되는 일은 무엇일까? 도구와 재료를 준비하는 일, 요리가 완성된 후 요리를 먹는 일 등이 있을 것이다. 이 때 매번 반복되는 일들을 한번에 처리해주는 버튼이 있다고 한다면 우리는 재료를 조리하는 일에만 집중하면 된다. 반복되는 일은 버튼만 누르면 된다.

#### AOP의 장점
AOP의 장점은 반복되는 코드를 제거하고 사용자가 쉽게 관리할 수 있게 도와준다는 점이다.

### 결론
스프링 삼각형에 대해 가볍고 얕게 살펴봤다. 스프링을 공부하는 입문자 관점에서 쓴 글이라 사용한 예시나 설명이 올바르지 않을 수 있다. 그럴 땐 피드백을 주신다면 정말 감사합니다.
